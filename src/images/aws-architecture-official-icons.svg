<?xml version="1.0" encoding="UTF-8"?>
<svg width="1400" height="900" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 28px; font-weight: bold; fill: #232F3E; }
      .service-label { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #232F3E; }
      .description { font-family: Arial, sans-serif; font-size: 12px; fill: #666; }
      .flow-text { font-family: Arial, sans-serif; font-size: 12px; fill: #232F3E; font-weight: bold; }
      .data-flow { stroke: #FF6B35; stroke-width: 4; fill: none; marker-end: url(#arrowhead); }
      .service-connection { stroke: #4A90B8; stroke-width: 3; fill: none; marker-end: url(#arrowhead-blue); }
      .service-box { fill: #FFFFFF; stroke: #E5E5E5; stroke-width: 2; }
    </style>
    <marker id="arrowhead" markerWidth="14" markerHeight="12" 
     refX="12" refY="6" orient="auto">
      <polygon points="0 0, 14 6, 0 12" fill="#FF6B35" />
    </marker>
    <marker id="arrowhead-blue" markerWidth="14" markerHeight="12" 
     refX="12" refY="6" orient="auto">
      <polygon points="0 0, 14 6, 0 12" fill="#4A90B8" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1400" height="900" fill="#FAFAFA"/>
  
  <!-- Title -->
  <text x="700" y="50" text-anchor="middle" class="title">AWS Health Notifications Architecture</text>
  <text x="700" y="75" text-anchor="middle" class="description">Built with Terraform - Multi-Environment Infrastructure</text>
  
  <!-- AWS Health Dashboard -->
  <g transform="translate(100, 150)">
    <rect x="0" y="0" width="200" height="130" class="service-box" rx="8"/>
    <!-- AWS Health Dashboard Icon -->
    <g transform="translate(60, 10) scale(0.7)">
      <rect x="0" y="0" width="80" height="80" fill="#E7157B"/>
      <path d="M32,12 C29.342,12 27.174,14.168 27.174,16.826 C27.174,19.484 29.342,21.652 32,21.652 C34.658,21.652 36.826,19.484 36.826,16.826 C36.826,14.168 34.658,12 32,12 L32,12 Z M32,19.652 C30.447,19.652 29.174,18.379 29.174,16.826 C29.174,15.273 30.447,14 32,14 C33.553,14 34.826,15.273 34.826,16.826 C34.826,18.379 33.553,19.652 32,19.652 L32,19.652 Z M48,12 C45.342,12 43.174,14.168 43.174,16.826 C43.174,19.484 45.342,21.652 48,21.652 C50.658,21.652 52.826,19.484 52.826,16.826 C52.826,14.168 50.658,12 48,12 L48,12 Z M48,19.652 C46.447,19.652 45.174,18.379 45.174,16.826 C45.174,15.273 46.447,14 48,14 C49.553,14 50.826,15.273 50.826,16.826 C50.826,18.379 49.553,19.652 48,19.652 L48,19.652 Z M26,30 L54,30 C55.103,30 56,30.897 56,32 L56,62 C56,63.103 55.103,64 54,64 L26,64 C24.897,64 24,63.103 24,62 L24,32 C24,30.897 24.897,30 26,30 L26,30 Z M26,32 L26,62 L54,62 L54,32 L26,32 Z M28,48 L32,48 L32,58 L28,58 L28,48 Z M34,40 L38,40 L38,58 L34,58 L34,40 Z M40,44 L44,44 L44,58 L40,58 L40,44 Z M46,36 L50,36 L50,58 L46,58 L46,36 Z" fill="#FFFFFF"/>
    </g>
    <text x="100" y="95" text-anchor="middle" class="service-label">AWS Health Dashboard</text>
    <text x="100" y="115" text-anchor="middle" class="description">Service health events &amp; notifications</text>
  </g>
  
  <!-- EventBridge -->
  <g transform="translate(400, 250)">
    <rect x="0" y="0" width="220" height="150" class="service-box" rx="8"/>
    <!-- Amazon EventBridge Icon -->
    <g transform="translate(70, 10) scale(0.7)">
      <rect x="0" y="0" width="80" height="80" fill="#E7157B"/>
      <path d="M53.656744,66 C51.5137882,66 49.7695913,64.247 49.7695913,62.091 C49.7695913,59.935 51.5137882,58.182 53.656744,58.182 C55.7996998,58.182 57.5438968,59.935 57.5438968,62.091 C57.5438968,64.247 55.7996998,66 53.656744,66 L53.656744,66 Z M45.1326526,49 L34.7977386,49 L29.6297845,40 L34.7977386,31 L45.1326526,31 L50.2996124,40 L45.1326526,49 Z M27.6210741,21.818 C25.4781184,21.818 23.7339214,20.065 23.7339214,17.909 C23.7339214,15.753 25.4781184,14 27.6210741,14 C29.7650244,14 31.5092213,15.753 31.5092213,17.909 C31.5092213,20.065 29.7650244,21.818 27.6210741,21.818 L27.6210741,21.818 Z M53.656744,56.182 C52.918891,56.182 52.214848,56.325 51.5635088,56.576 L47.3402451,49.41 L47.117497,49.543 L52.3093171,40.5 C52.4863222,40.19 52.4863222,39.81 52.3093171,39.5 L46.5675877,29.5 C46.3895881,29.19 46.0614325,29 45.7064278,29 L35.2581509,29 L35.2989218,28.976 L31.4266852,22.404 C32.691576,21.32 33.4980434,19.708 33.4980434,17.909 C33.4980434,14.651 30.8618597,12 27.6210741,12 C24.381283,12 21.7450993,14.651 21.7450993,17.909 C21.7450993,21.167 24.381283,23.818 27.6210741,23.818 C28.3599216,23.818 29.0639646,23.675 29.7153038,23.424 L33.3299879,29.557 L27.6200797,39.5 C27.4430746,39.81 27.4430746,40.19 27.6200797,40.5 L33.3628035,50.5 C33.5408031,50.81 33.8689587,51 34.2239635,51 L45.7064278,51 C45.7889639,51 45.8695112,50.987 45.9470752,50.968 L49.8521274,57.596 C48.5862421,58.68 47.7807692,60.292 47.7807692,62.091 C47.7807692,65.349 50.4159585,68 53.656744,68 C56.8975296,68 59.5327189,65.349 59.5327189,62.091 C59.5327189,58.833 56.8975296,56.182 53.656744,56.182 L53.656744,56.182 Z M59.5844283,32.104 C57.4414725,32.104 55.6982699,30.351 55.6982699,28.195 C55.6982699,26.039 57.4414725,24.286 59.5844283,24.286 C61.7273841,24.286 63.471581,26.039 63.471581,28.195 C63.471581,30.351 61.7273841,32.104 59.5844283,32.104 L59.5844283,32.104 Z M66.8665003,39.5 L63.091716,32.925 C64.5266511,31.846 65.4604031,30.13 65.4604031,28.195 C65.4604031,24.937 62.8252138,22.286 59.5844283,22.286 C58.7600615,22.286 57.9744768,22.459 57.2614841,22.77 L54.1837819,17.409 C54.0067767,17.1 53.6776267,16.909 53.3226219,16.909 L40.9949082,16.909 L40.9949082,18.909 L52.7488468,18.909 L55.5958456,23.869 C54.4383511,24.949 53.7094478,26.486 53.7094478,28.195 C53.7094478,31.453 56.3446371,34.104 59.5844283,34.104 C60.1880358,34.104 60.771755,34.011 61.3206699,33.84 L64.85779,40 L59.8917013,48.648 L61.6140212,49.648 L66.8665003,40.5 C67.0444999,40.19 67.0444999,39.81 66.8665003,39.5 L66.8665003,39.5 Z M21.229,55.247 C19.0850498,55.247 17.3408528,53.493 17.3408528,51.338 C17.3408528,49.182 19.0850498,47.429 21.229,47.429 C23.3719558,47.429 25.1161527,49.182 25.1161527,51.338 C25.1161527,53.493 23.3719558,55.247 21.229,55.247 L21.229,55.247 Z M24.4767464,56.258 C26.0588544,55.198 27.1049748,53.389 27.1049748,51.338 C27.1049748,48.08 24.4687911,45.429 21.229,45.429 C20.2902759,45.429 19.4062445,45.657 18.618671,46.052 L15.1432044,40 L20.9018387,29.971 L19.1785244,28.971 L13.1334997,39.5 C12.9555001,39.81 12.9555001,40.19 13.1334997,40.5 L17.0047419,47.24 C15.9834817,48.304 15.3520307,49.747 15.3520307,51.338 C15.3520307,54.596 17.9882144,57.247 21.229,57.247 C21.7172558,57.247 22.189601,57.18 22.6440469,57.066 L25.8162181,62.591 C25.9942177,62.9 26.3223733,63.091 26.6773781,63.091 L39.0060862,63.091 L39.0060862,61.091 L27.2511532,61.091 L24.4767464,56.258 Z" fill="#FFFFFF"/>
    </g>
    <text x="110" y="105" text-anchor="middle" class="service-label">Amazon EventBridge</text>
    <text x="110" y="125" text-anchor="middle" class="description">Event Rule: health-event-notifications</text>
    <text x="110" y="140" text-anchor="middle" class="description">Pattern: aws.health | AWS Health Event</text>
  </g>
  
  <!-- Lambda Function -->
  <g transform="translate(750, 400)">
    <rect x="0" y="0" width="240" height="170" class="service-box" rx="8"/>
    <!-- AWS Lambda Icon -->
    <g transform="translate(80, 10) scale(0.7)">
      <rect x="0" y="0" width="80" height="80" fill="#ED7100"/>
      <path d="M28.0075352,66 L15.5907274,66 L29.3235885,37.296 L35.5460249,50.106 L28.0075352,66 Z M30.2196674,34.553 C30.0512768,34.208 29.7004629,33.989 29.3175745,33.989 L29.3145676,33.989 C28.9286723,33.99 28.5778583,34.211 28.4124746,34.558 L13.097944,66.569 C12.9495999,66.879 12.9706487,67.243 13.1550766,67.534 C13.3374998,67.824 13.6582439,68 14.0020416,68 L28.6420072,68 C29.0299071,68 29.3817234,67.777 29.5481094,67.428 L37.563706,50.528 C37.693006,50.254 37.6920037,49.937 37.5586944,49.665 L30.2196674,34.553 Z M64.9953491,66 L52.6587274,66 L32.866809,24.57 C32.7014253,24.222 32.3486067,24 31.9617091,24 L23.8899822,24 L23.8990031,14 L39.7197081,14 L59.4204149,55.429 C59.5857986,55.777 59.9386172,56 60.3255148,56 L64.9953491,56 L64.9953491,66 Z M65.9976745,54 L60.9599868,54 L41.25928,12.571 C41.0938963,12.223 40.7410777,12 40.3531778,12 L22.89768,12 C22.3453987,12 21.8963569,12.447 21.8953545,12.999 L21.884329,24.999 C21.884329,25.265 21.9885708,25.519 22.1780103,25.707 C22.3654452,25.895 22.6200358,26 22.8866544,26 L31.3292417,26 L51.1221625,67.43 C51.2885485,67.778 51.6393624,68 52.02626,68 L65.9976745,68 C66.5519605,68 67,67.552 67,67 L67,55 C67,54.448 66.5519605,54 65.9976745,54 L65.9976745,54 Z" fill="#FFFFFF"/>
    </g>
    <text x="120" y="105" text-anchor="middle" class="service-label">AWS Lambda</text>
    <text x="120" y="125" text-anchor="middle" class="description">Function: health-event-formatter</text>
    <text x="120" y="140" text-anchor="middle" class="description">Runtime: Node.js 20.x | Timeout: 30s</text>
    <text x="120" y="155" text-anchor="middle" class="description">Enhanced formatting &amp; error handling</text>
  </g>
  
  <!-- SNS Topic -->
  <g transform="translate(400, 650)">
    <rect x="0" y="0" width="220" height="150" class="service-box" rx="8"/>
    <!-- Amazon SNS Icon -->
    <g transform="translate(70, 10) scale(0.7)">
      <rect x="0" y="0" width="80" height="80" fill="#E7157B"/>
      <path d="M17,38 C18.103,38 19,38.897 19,40 C19,41.103 18.103,42 17,42 C15.897,42 15,41.103 15,40 C15,38.897 15.897,38 17,38 L17,38 Z M41,64 C29.314,64 19.289,55.466 17.194,43.98 C18.965,43.894 20.427,42.659 20.857,41 L27,41 L27,39 L20.857,39 C20.427,37.342 18.966,36.107 17.195,36.02 C19.285,24.71 29.511,16 41,16 C45.313,16 49.832,17.622 54.429,20.821 L55.571,19.179 C50.633,15.743 45.73,14 41,14 C28.27,14 16.949,23.865 15.063,36.521 C13.839,37.207 13,38.5 13,40 C13,41.5 13.839,42.793 15.063,43.478 C16.97,56.341 28.056,66 41,66 C46.407,66 51.942,64.157 56.585,60.811 L55.415,59.189 C51.11,62.292 45.991,64 41,64 L41,64 Z M30.101,36.442 C31.955,36.895 34.275,37 36,37 C37.642,37 39.823,36.905 41.629,36.506 L37.105,45.553 C37.036,45.691 37,45.845 37,46 L37,50.453 C36.199,50.964 34.833,51.812 34,51.986 L34,46 C34,45.868 33.974,45.737 33.923,45.615 L30.101,36.442 Z M36,33 C40.025,33 42.174,33.604 42.841,34 C42.174,34.396 40.025,35 36,35 C31.975,35 29.826,34.396 29.159,34 C29.826,33.604 31.975,33 36,33 L36,33 Z M33,54 L34,54 C34.043,54 34.086,53.997 34.128,53.992 C35.352,53.833 36.909,52.887 38.272,52.013 L38.535,51.845 C38.824,51.661 39,51.342 39,51 L39,46.236 L44.559,35.12 C44.833,34.801 45,34.434 45,34 C45,31.39 39.361,31 36,31 C32.639,31 27,31.39 27,34 C27,34.366 27.12,34.684 27.32,34.967 L32,46.2 L32,53 C32,53.552 32.447,54 33,54 L33,54 Z M62,53 C63.103,53 64,53.897 64,55 C64,56.103 63.103,57 62,57 C60.897,57 60,56.103 60,55 C60,53.897 60.897,53 62,53 L62,53 Z M62,23 C63.103,23 64,23.897 64,25 C64,26.103 63.103,27 62,27 C60.897,27 60,26.103 60,25 C60,23.897 60.897,23 62,23 L62,23 Z M64,38 C65.103,38 66,38.897 66,40 C66,41.103 65.103,42 64,42 C62.897,42 62,41.103 62,40 C62,38.897 62.897,38 64,38 L64,38 Z M54,41 L60.143,41 C60.589,42.72 62.142,44 64,44 C66.206,44 68,42.206 68,40 C68,37.794 66.206,36 64,36 C62.142,36 60.589,37.28 60.143,39 L54,39 L54,26 L58.143,26 C58.589,27.72 60.142,29 62,29 C64.206,29 66,27.206 66,25 C66,22.794 64.206,21 62,21 C60.142,21 58.589,22.28 58.143,24 L53,24 C52.447,24 52,24.448 52,25 L52,39 L45,39 L45,41 L52,41 L52,55 C52,55.552 52.447,56 53,56 L58.143,56 C58.589,57.72 60.142,59 62,59 C64.206,59 66,57.206 66,55 C66,52.794 64.206,51 62,51 C60.142,51 58.589,52.28 58.143,54 L54,54 L54,41 Z" fill="#FFFFFF"/>
    </g>
    <text x="110" y="105" text-anchor="middle" class="service-label">Amazon SNS</text>
    <text x="110" y="125" text-anchor="middle" class="description">Topic: health-event-notifications</text>
    <text x="110" y="140" text-anchor="middle" class="description">Formatted notifications distribution</text>
  </g>
  
  <!-- S3 Backend -->
  <g transform="translate(100, 400)">
    <rect x="0" y="0" width="180" height="130" class="service-box" rx="8"/>
    <!-- Amazon S3 Icon -->
    <g transform="translate(50, 10) scale(0.7)">
      <rect x="0" y="0" width="80" height="80" fill="#7AA116"/>
      <g transform="translate(12.999900, 11.999600)" fill="#FFFFFF">
        <path d="M47.836,30.893 L48.22,28.189 C51.761,30.31 51.807,31.186 51.8060132,31.21 C51.8,31.215 51.196,31.719 47.836,30.893 L47.836,30.893 Z M45.893,30.353 C39.773,28.501 31.25,24.591 27.801,22.961 C27.801,22.947 27.805,22.934 27.805,22.92 C27.805,21.595 26.727,20.517 25.401,20.517 C24.077,20.517 22.999,21.595 22.999,22.92 C22.999,24.245 24.077,25.323 25.401,25.323 C25.983,25.323 26.511,25.106 26.928,24.761 C30.986,26.682 39.443,30.535 45.608,32.355 L43.17,49.561 C43.163,49.608 43.16,49.655 43.16,49.702 C43.16,51.217 36.453,54 25.494,54 C14.419,54 7.641,51.217 7.641,49.702 C7.641,49.656 7.638,49.611 7.632,49.566 L2.538,12.359 C6.947,15.394 16.43,17 25.5,17 C34.556,17 44.023,15.4 48.441,12.374 L45.893,30.353 Z M2,8.478 C2.072,7.162 9.634,2 25.5,2 C41.364,2 48.927,7.161 49,8.478 L49,8.927 C48.13,11.878 38.33,15 25.5,15 C12.648,15 2.843,11.868 2,8.913 L2,8.478 Z M51,8.5 C51,5.035 41.066,0 25.5,0 C9.934,0 0,5.035 0,8.5 L0.094,9.254 L5.642,49.778 C5.775,54.31 17.861,56 25.494,56 C34.966,56 45.029,53.822 45.159,49.781 L47.555,32.884 C48.888,33.203 49.985,33.366 50.866,33.366 C52.049,33.366 52.849,33.077 53.334,32.499 C53.732,32.025 53.884,31.451 53.77,30.84 C53.511,29.456 51.868,27.964 48.522,26.055 L50.898,9.293 L51,8.5 Z"/>
      </g>
    </g>
    <text x="90" y="95" text-anchor="middle" class="service-label">Amazon S3</text>
    <text x="90" y="115" text-anchor="middle" class="description">Terraform state backend</text>
  </g>
  
  <!-- CloudWatch -->
  <g transform="translate(1100, 250)">
    <rect x="0" y="0" width="180" height="130" class="service-box" rx="8"/>
    <!-- CloudWatch Icon -->
    <g transform="translate(50, 10) scale(0.7)">
      <rect x="0" y="0" width="80" height="80" fill="#E7157B"/>
      <path d="M34,30 L34,36 L30,36 L30,30 L34,30 Z M40,26 L40,36 L36,36 L36,26 L40,26 Z M46,22 L46,36 L42,36 L42,22 L46,22 Z M52,18 L52,36 L48,36 L48,18 L52,18 Z M58,14 L58,36 L54,36 L54,14 L58,14 Z M62,12 L62,36 L66,36 L66,12 L62,12 Z M26,40 L26,54 L68,54 L68,40 L26,40 Z M24,38 L70,38 C71.103,38 72,38.897 72,40 L72,54 C72,55.103 71.103,56 70,56 L24,56 C22.897,56 22,55.103 22,54 L22,40 C22,38.897 22.897,38 24,38 L24,38 Z M16,62 L64,62 C65.103,62 66,62.897 66,64 C66,65.103 65.103,66 64,66 L16,66 C14.897,66 14,65.103 14,64 C14,62.897 14.897,62 16,62 L16,62 Z" fill="#FFFFFF"/>
    </g>
    <text x="90" y="95" text-anchor="middle" class="service-label">CloudWatch</text>
    <text x="90" y="115" text-anchor="middle" class="description">Logs &amp; Monitoring</text>
  </g>
  
  <!-- IAM -->
  <g transform="translate(1100, 400)">
    <rect x="0" y="0" width="180" height="130" class="service-box" rx="8"/>
    <!-- IAM Icon -->
    <g transform="translate(50, 10) scale(0.7)">
      <rect x="0" y="0" width="80" height="80" fill="#E7157B"/>
      <circle cx="40" cy="25" r="8" fill="#FFFFFF"/>
      <path d="M25,45 C25,38.925 29.925,34 36,34 L44,34 C50.075,34 55,38.925 55,45 L55,55 L25,55 L25,45 Z" fill="#FFFFFF"/>
      <rect x="20" y="60" width="40" height="8" fill="#FFFFFF"/>
    </g>
    <text x="90" y="95" text-anchor="middle" class="service-label">AWS IAM</text>
    <text x="90" y="115" text-anchor="middle" class="description">Roles &amp; Policies</text>
  </g>
  
  <!-- Subscribers -->
  <g transform="translate(150, 720)">
    <rect x="0" y="0" width="180" height="110" fill="#F0F8FF" stroke="#4169E1" stroke-width="2" rx="8"/>
    <!-- Email Icon -->
    <rect x="30" y="15" width="30" height="20" fill="#4169E1" rx="3"/>
    <path d="M 30 15 L 45 25 L 60 15" stroke="white" stroke-width="2" fill="none"/>
    <text x="90" y="50" text-anchor="middle" class="service-label">Subscribers</text>
    <text x="90" y="70" text-anchor="middle" class="description">• Email notifications</text>
    <text x="90" y="85" text-anchor="middle" class="description">• SMS alerts</text>
    <text x="90" y="100" text-anchor="middle" class="description">• Other endpoints</text>
  </g>
  
  <!-- Data Flow Arrows -->
  <!-- AWS Health to EventBridge -->
  <line x1="300" y1="215" x2="400" y2="290" class="data-flow"/>
  <text x="340" y="245" class="flow-text">Health Events</text>
  
  <!-- EventBridge to Lambda -->
  <line x1="620" y1="330" x2="750" y2="440" class="data-flow"/>
  <text x="670" y="375" class="flow-text">Event Trigger</text>
  
  <!-- Lambda to SNS -->
  <line x1="820" y1="570" x2="580" y2="650" class="data-flow"/>
  <text x="680" y="605" class="flow-text">Publish Notification</text>
  
  <!-- SNS to Subscribers -->
  <line x1="400" y1="735" x2="330" y2="745" class="data-flow"/>
  <text x="350" y="725" class="flow-text">Distribute</text>
  
  <!-- Support Services Connections -->
  <!-- Lambda to CloudWatch -->
  <line x1="990" y1="485" x2="1100" y2="315" class="service-connection"/>
  <text x="1040" y="395" class="flow-text">Logs</text>
  
  <!-- Lambda to IAM -->
  <line x1="950" y1="515" x2="1100" y2="465" class="service-connection"/>
  <text x="1020" y="485" class="flow-text">Permissions</text>
  
  <!-- Environment Indicators -->
  <g transform="translate(50, 100)">
    <rect x="0" y="0" width="80" height="30" fill="#E8F4FD" stroke="#4A90B8" stroke-width="2" rx="4"/>
    <text x="40" y="20" text-anchor="middle" class="service-label">DEV</text>
  </g>
  
  <g transform="translate(1270, 100)">
    <rect x="0" y="0" width="80" height="30" fill="#FFE4E6" stroke="#FF7675" stroke-width="2" rx="4"/>
    <text x="40" y="20" text-anchor="middle" class="service-label">PROD</text>
  </g>
  
  <!-- Architecture Features -->
  <g transform="translate(700, 800)">
    <text x="0" y="0" class="service-label">Architecture Features:</text>
    <text x="0" y="20" class="description">✓ Multi-environment deployment (dev/prod)</text>
    <text x="0" y="35" class="description">✓ Enhanced event formatting with emojis and rich notifications</text>
    <text x="0" y="50" class="description">✓ Comprehensive error handling and fallback messaging</text>
    <text x="0" y="65" class="description">✓ AWS SDK v3 with Node.js 20.x runtime</text>
    <text x="0" y="80" class="description">✓ S3 backend with native locking for Terraform state</text>
  </g>
  
</svg>